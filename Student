#include <iostream>
#include <fstream>  
#include <string> 
#include <map>
#include <sstream>
using namespace std;
int stringtoint(const string& s){
	stringstream ss;
	int a;
	ss << s;
	ss >> a;
	return a;
}
class temp{
public:
	string weekday1;
	string time;
	int flag;
	int studentID;
};
class student{
	map<int,temp*>app;
public:
	student(){};
	void display(){
		ifstream outfile("outfile.dat");
		string line, str;
		string a[5];
		int j=0, d, k;
		while (getline(outfile, line)) 
		{
			istringstream stream(line);
			for(int i = 0; stream >> str && i < 5; i++){
				a[i] = str.c_str();
			}
			temp* tp = new temp();
			int j = stringtoint(a[0]);
			int d = stringtoint(a[3]);
			int k = stringtoint(a[4]);
			tp->weekday1 = a[1];
			tp->time = a[2];
			tp->studentID = d;
			tp->flag = k;
			app[j] = tp;
		}
		for (map<int, temp*>::iterator it = app.begin(); it != app.end(); it++) {
			cout << it->first << "   " << (it->second)->weekday1 << "   " << (it->second)->time << "   " << (it->second)->studentID;
			if ((it->second)->flag) {
						cout<< "     " << "booking is not available!" << endl;
					}
					else {
						cout<<"      "<<"booking is available!" << endl;
					}
		}
	}
	void check(){

	}
	void book(){
		int i;
		cout << "Please entre index: "
		cin >> i;
		int k = 1;
		for (map<int, temp*>::iterator it = app.begin(); it != app.end(); it++) {
			if (k == i) {
				(it->second)->flag = "not available";
			}
			k++;
		}
	void cancel(){

	}
};

int main(){
	student s;
	int i;
	cout << "Welcome to Booking System" << '\n';
	cout << "1. Display the Schedule" << '\n';
	cout << "2. Check my appointment" << '\n';
	cout << "3. Book an appointment" << '\n';
	cout << "4. Cancel my appointment" << '\n';
	cout << "5. Exit" << '\n';
	cout << "Please entre the number: " << '\n';
	do {
		cin >> i;
		if (i < 0 || i> 5)
			i = 5;
		switch (i){
		case 1:
			s.display();
			break;
		case 2:
			s.check();
			break;
		case 3:
			//s.book();
			break;
		case 4:
			s.cancel();
			break;
		case 5:
			break;
		}
	} while (i != 5);
	cout << "Thanks for using Booking System!" << '\n';
	return 0;
}
